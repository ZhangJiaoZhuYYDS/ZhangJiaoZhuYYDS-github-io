<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>一生很长，一生很短，所以你好！ - 大鹏一日同风起，扶摇直上九万里</title><meta name="author" content="张教主"><meta name="copyright" content="张教主"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="大鹏一日同风起，扶摇直上九万里">
<meta property="og:type" content="website">
<meta property="og:title" content="一生很长，一生很短，所以你好！">
<meta property="og:url" content="https://github.com/ZhangJiaoZhuYYDS/index.html">
<meta property="og:site_name" content="一生很长，一生很短，所以你好！">
<meta property="og:description" content="大鹏一日同风起，扶摇直上九万里">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/ZhangJiaoZhuYYDS/img/touxiang.jpg">
<meta property="article:author" content="张教主">
<meta property="article:tag" content="博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/ZhangJiaoZhuYYDS/img/touxiang.jpg"><link rel="shortcut icon" href="/ZhangJiaoZhuYYDS-github-io/img/favicon.png"><link rel="canonical" href="https://github.com/ZhangJiaoZhuYYDS/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/ZhangJiaoZhuYYDS-github-io/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/ZhangJiaoZhuYYDS-github-io/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 张教主","link":"链接: ","source":"来源: 一生很长，一生很短，所以你好！","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '一生很长，一生很短，所以你好！',
  isPost: false,
  isHome: true,
  isHighlightShrink: true,
  isToc: false,
  postUpdate: '2023-02-13 21:00:24'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/static-butterfly/dist/css/index.min.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/ZhangJiaoZhuYYDS-github-io/atom.xml" title="一生很长，一生很短，所以你好！" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/ZhangJiaoZhuYYDS-github-io/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/ZhangJiaoZhuYYDS-github-io/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/ZhangJiaoZhuYYDS-github-io/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/ZhangJiaoZhuYYDS-github-io/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/ZhangJiaoZhuYYDS-github-io/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/ZhangJiaoZhuYYDS-github-io/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/ZhangJiaoZhuYYDS-github-io/./img/img.png')"><nav id="nav"><span id="blog-info"><a href="/ZhangJiaoZhuYYDS-github-io/" title="一生很长，一生很短，所以你好！"><img class="site-icon" src="/ZhangJiaoZhuYYDS-github-io/./img/img.png"/><span class="site-name">一生很长，一生很短，所以你好！</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/ZhangJiaoZhuYYDS-github-io/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/ZhangJiaoZhuYYDS-github-io/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/ZhangJiaoZhuYYDS-github-io/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">一生很长，一生很短，所以你好！</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/ZhangJiaoZhuYYDS" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/m0_64288219" target="_blank" title="CSDN"><i class="fab fa-algolia"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/ZhangJiaoZhuYYDS-github-io/2023/02/12/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="使用Hexo框架+Butterfly主题搭建个人博客"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="使用Hexo框架+Butterfly主题搭建个人博客"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/2023/02/12/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="使用Hexo框架+Butterfly主题搭建个人博客">使用Hexo框架+Butterfly主题搭建个人博客</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-02-12T15:11:52.000Z" title="发表于 2023-02-12 23:11:52">2023-02-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/ZhangJiaoZhuYYDS-github-io/categories/%E5%8D%9A%E5%AE%A2/">博客</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/hexo/">hexo</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/node/">node</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/github/">github</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/%E5%8D%9A%E5%AE%A2/">博客</a></span></div><div class="content">前言Hexo是基于NodeJS构建简洁高效的博客框架。使用 Markdown 编写文章内容，几秒内即可利用靓丽的主题生成静态网页。支持丰富的主题与插件，主题用于页面展示效果，插件用于实现博客的特殊功能 如：文章及内容搜索、图片懒加载、一键远程部署等。
Butterfly是Hexo的主题之一，也是集成的主题。官方网站也是该主题的演示页面，其教程更加详细，本文为入门级教学，使用该主题不需要对hexo框架有过多了解，遵循butterfly的写作规范开发即可。
安装Hexo
安装Hexo之前需要先安装node.js(建议版本12.13.0)。没安装node.js请自行查询安装方法。
node.js安装参考链接：
https://blog.csdn.net/weixin_44893902/article/details/121788104

全局安装Hexohexo全局命令用于 初始化Hexo项目、生成静态页面、一键远程部署、本地运行Web页面调试等。
1npm install -g hexo-cli
1 创建项目目录在本地任意文件夹下创建一个空目录，如hexo-test
2 初始化目录结构在目 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/ZhangJiaoZhuYYDS-github-io/2022/10/29/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" title="我的第一篇博客"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="我的第一篇博客"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/2022/10/29/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" title="我的第一篇博客">我的第一篇博客</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-29T04:42:49.000Z" title="发表于 2022-10-29 12:42:49">2022-10-29</time></span></div><div class="content">fsefseggesfefefegeggeggg</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/ZhangJiaoZhuYYDS-github-io/2022/10/29/hello-world/" title="Hello World"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="Hello World"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/2022/10/29/hello-world/" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-29T04:40:12.422Z" title="发表于 2022-10-29 12:40:12">2022-10-29</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;

More info: Writing
Run server1$ hexo server

More info: Server
Generate static files1$ hexo generate

More info: Generating
Deploy to remote sites1$ hexo deploy

More info: Deployment
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/ZhangJiaoZhuYYDS-github-io/pages/9522d9/" title="Spring5 Webflux"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="Spring5 Webflux"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/pages/9522d9/" title="Spring5 Webflux">Spring5 Webflux</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-23T13:00:09.000Z" title="发表于 2022-04-23 21:00:09">2022-04-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/ZhangJiaoZhuYYDS-github-io/categories/Spring5/">Spring5</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/Spring5/">Spring5</a></span></div><div class="content">Spring5 Webflux[[toc]]
介绍
SpringWebflux是Spring5添加新的模块，用于web开发的，功能和SpringMVC类似的，Webflux使用当前一种比较流行响应式编程出现的框架。



使用传统 web 框架，比如 SpringMVC，这些基于 Servlet 容器，Webflux 是一种异步非阻塞的框架，异步非阻塞的框架在 Servlet3.1 以后才支持，核心是基于 Reactor 的相关 API 实现的。

什么是异步非阻塞

异步和同步针对调用者，调用者发送请求，如果等着对方回应之后才去做其他事情就是同步，如果发送请求之后不等着对方回应就去做其他事情就是异步。
阻塞和非阻塞针对被调用者，被调用者收到请求之后，做完了请求任务才给出反馈，收到请求之后马上给出犯规然后再去做事情就是非阻塞。


Webflux 特点：

非阻塞式：在有限资源下，提高系统吞吐量和伸缩性，以 Reactor 为基础实现响应式编程
函数式编程：Spring5 框架基于 java8，Webflux 使用 Java8 函数式编程方式实现路由请求


与SpringMVC比较
 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/ZhangJiaoZhuYYDS-github-io/2022/02/19/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="java8函数式编程"><img class="post-bg" src="/ZhangJiaoZhuYYDS-github-io/res/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/cover.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="java8函数式编程"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/2022/02/19/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="java8函数式编程">java8函数式编程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-19T06:17:52.000Z" title="发表于 2022-02-19 14:17:52">2022-02-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/ZhangJiaoZhuYYDS-github-io/categories/java/">java</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/java/">java</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/java8/">java8</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">函数式编程</a></span></div><div class="content">什么是函数式编程?
百度百科： 函数式编程，是一种编程范式，它将电脑运算视为函数运算，并且避免使用程序状态以及易变对象。其中，λ演算为该语言最重要的基础。而且，λ演算的函数可以接受函数作为输入参数和输出返回值。
讲人话： 函数式编程一种编程范式,允许使用一种表达式（lambda表达式）来表示一个函数
函数式接口
Java语言中函数式编程，通过Java8版本提供的函数式接口规范来实现,它指的是有且只有一个未实现的方法的接口，一般通过FunctionalInterface这个注解来表明某个接口是一个函数式接口(非必须，如果标注了该注解，编译器检查接口是否符合函数式接口规范，如出现两个及以上数量的普通方法，编译器会报错)。函数式接口是Java支持函数式编程的基础。java8及以上版本才支持。

入门使用Consumer作为示例，它是一个函数式接口，包含一个抽象方法accept，这个方法只有输入而无输出。现在我们要定义一个Consumer对象，传统的方式是这样定义的：
123456Consumer c = new Consumer() &#123;    @Override    public ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/ZhangJiaoZhuYYDS-github-io/pages/3b149b/" title="Spring5 新功能"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="Spring5 新功能"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/pages/3b149b/" title="Spring5 新功能">Spring5 新功能</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-07T02:42:09.000Z" title="发表于 2022-01-07 10:42:09">2022-01-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/ZhangJiaoZhuYYDS-github-io/categories/Spring5/">Spring5</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/Spring5/">Spring5</a></span></div><div class="content">Spring5 新功能[[toc]]

整个Spring5框架的代码基于Java8,运行时兼容JDK9，许多不建议使用的类和方法在代码库中删除

Spring5.0框架自带了通用的日志封装
Spring5已经移除Log4jConfigListener,官方建议使用Log4j2
Spring5框架整合Log4j2

   第一步,引入相关的jar包
 
   第二步，创建log4j2.xml配置文件
   1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!--日志级别以及优先级排序: OFF &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE &gt; ALL --&gt;&lt;!--Configuration后面的status用于设置log4j2自身内部的信息输出，可以不设置，当设置成trace时，可以看到log4j2内部各种详细输出--&gt;&lt;conf ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/ZhangJiaoZhuYYDS-github-io/pages/1a5d78/" title="Spring5 事务"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="Spring5 事务"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/pages/1a5d78/" title="Spring5 事务">Spring5 事务</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-04T11:33:20.000Z" title="发表于 2022-01-04 19:33:20">2022-01-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/ZhangJiaoZhuYYDS-github-io/categories/Spring5/">Spring5</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/Spring5/">Spring5</a></span></div><div class="content">Spring5 事务[[toc]]
事务概念
什么是事务

事务是数据库操作最基本的单元，逻辑上一组操作，要么都成功，如果有一个失败所有操作都失败
典型场景:银行转账


lucy转账100元给mary
lucy少100,mary多100


事务四个特性(ACID)

原子性
一致性
隔离性
持久性



搭建事务操作环境

创建数据库表,添加数据
123456CREATE TABLE t_account(	id VARCHAR(20),	username VARCHAR(50),	money VARCHAR(50))INSERT INTO t_account VALUES(&#x27;1&#x27;,&#x27;lucy&#x27;,1000)INSERT INTO t_account VALUES(&#x27;2&#x27;,&#x27;mary&#x27;,1000)

创建service,搭建dao,完成对象创建和注入关系

service注入dao,在dao注入JdbcTemplate,在JdbcTemplate注入DataSource
12345678@Servicepu ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/ZhangJiaoZhuYYDS-github-io/pages/1f9dd1/" title="Jdbc Template"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="Jdbc Template"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/pages/1f9dd1/" title="Jdbc Template">Jdbc Template</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-01T15:21:07.000Z" title="发表于 2022-01-01 23:21:07">2022-01-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/ZhangJiaoZhuYYDS-github-io/categories/Spring5/">Spring5</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/Spring5/">Spring5</a></span></div><div class="content">Jdbc Template[[toc]]
Jdbc Template(概念和准备)
什么是JdbcTemplate

Spring框架对JDBC进行封装，使用JdbcTemplate方便实现对数据库操作


准备工作



创建数据库和表

12345CREATE DATABASE user_dbCREATE TABLE t_book(	userId BIGINT PRIMARY KEY,	username VARCHAR(100) NOT NULL,	ustatus VARCHAR(50) NOT NULL)


引入相关的jar包



在Spring文件中配置数据库的连接池

12345678&lt;!-- 数据库连接池 --&gt;&lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;      destroy-method=&quot;close&quot;&gt;    &lt;property name=&quot;url&quot; value ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/ZhangJiaoZhuYYDS-github-io/pages/e914bb/" title="Spring核心之面向切面编程AOP"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="Spring核心之面向切面编程AOP"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/pages/e914bb/" title="Spring核心之面向切面编程AOP">Spring核心之面向切面编程AOP</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-29T11:15:51.000Z" title="发表于 2021-12-29 19:15:51">2021-12-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/ZhangJiaoZhuYYDS-github-io/categories/Spring5/">Spring5</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/Spring5/">Spring5</a></span></div><div class="content">Spring核心之面向切面编程AOP[[toc]]
什么是AOP
面向切面编程（方面），利用 AOP 可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。
通俗描述:不通过修改源代码方式，在主干功能里面添加新功能
使用登陆例子说明AOP


AOP底层原理AOP底层使用动态代理
有接口的情况,使用JDK动态代理


创建接口实现类代理对象，增强类的方法


没有接口情况，使用CGLIB动态代理


创建子类的动态对象，增强类的方法


AOP(JDK动态代理)
使用JDK动态代理，使用Proxy类里面的方法创建代理对象


java.lang.reflect
Class Proxy
java.lang.Object

java.lang.reflect.Proxy



调用newProxyInstance方法


方法有三个参数:
第一参数，类加载器
第二参数，增强方法所在的类，这个类实现的接口，支持多个接口
第三参数，实现这个接口InvocationHandler,创建代理对象，写增强的部分

编写JDK动态代理代码
 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/ZhangJiaoZhuYYDS-github-io/pages/ba30cb/" title="Spring核心之控制反转IOC"><img class="post-bg" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="Spring核心之控制反转IOC"></a></div><div class="recent-post-info"><a class="article-title" href="/ZhangJiaoZhuYYDS-github-io/pages/ba30cb/" title="Spring核心之控制反转IOC">Spring核心之控制反转IOC</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-20T10:44:20.000Z" title="发表于 2021-12-20 18:44:20">2021-12-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/ZhangJiaoZhuYYDS-github-io/categories/Spring5/">Spring5</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/ZhangJiaoZhuYYDS-github-io/tags/Spring5/">Spring5</a></span></div><div class="content">Spring核心之控制反转IOC[[toc]]
IOC 概念和原理什么是IOC
控制反转，把对象创建和对象之间的调用过程，交给Spring进行管理
使用IOC目的：为了降低耦合度
做入门案例就是IOC实现

IOC 底层原理
xml解析、工厂模式、反射


原始方式与工厂模式对比


图解IOC底层原理
IOC 接口(BeanFactory)
IOC思想基于IOC容器完成，IOC容器底层就是对象工厂

Spring提供IOC容器实现两种方式:(两个接口)

BeanFactory:IOC容器基本实现，是Spring内部的使用接口，不提供开发人员进行使用

特点:加载配置文件时候不会创建对象，在获取对象(或者使用对象)才去创建对象


ApplicationContext:BeanFactory接口的子接口，提供更多更强大的功能，一般由开发人人员进行调用

特点:加载配置文件时候就会把在配置文件对象进行创建




ApplicationContext接口有实现类




FileSystemXmlApplicationContext
configLocation:要写上配置文件在系统盘 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/ZhangJiaoZhuYYDS-github-io/page/2/#content-inner">2</a><a class="extend next" rel="next" href="/ZhangJiaoZhuYYDS-github-io/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/ZhangJiaoZhuYYDS-github-io/img/touxiang.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">张教主</div><div class="author-info__description">大鹏一日同风起，扶摇直上九万里</div></div><div class="card-info-data site-data is-center"><a href="/ZhangJiaoZhuYYDS-github-io/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/ZhangJiaoZhuYYDS-github-io/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/ZhangJiaoZhuYYDS-github-io/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" href="https://github.com/ZhangJiaoZhuYYDS"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ZhangJiaoZhuYYDS" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/m0_64288219" target="_blank" title="CSDN"><i class="fab fa-algolia"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到教主的博客，QQ:1274929812。第一次访问时比较慢，下次访问就好多了</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/ZhangJiaoZhuYYDS-github-io/2023/02/12/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="使用Hexo框架+Butterfly主题搭建个人博客"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="使用Hexo框架+Butterfly主题搭建个人博客"/></a><div class="content"><a class="title" href="/ZhangJiaoZhuYYDS-github-io/2023/02/12/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="使用Hexo框架+Butterfly主题搭建个人博客">使用Hexo框架+Butterfly主题搭建个人博客</a><time datetime="2023-02-12T15:11:52.000Z" title="发表于 2023-02-12 23:11:52">2023-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/ZhangJiaoZhuYYDS-github-io/2022/10/29/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" title="我的第一篇博客"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="我的第一篇博客"/></a><div class="content"><a class="title" href="/ZhangJiaoZhuYYDS-github-io/2022/10/29/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" title="我的第一篇博客">我的第一篇博客</a><time datetime="2022-10-29T04:42:49.000Z" title="发表于 2022-10-29 12:42:49">2022-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/ZhangJiaoZhuYYDS-github-io/2022/10/29/hello-world/" title="Hello World"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/ZhangJiaoZhuYYDS-github-io/2022/10/29/hello-world/" title="Hello World">Hello World</a><time datetime="2022-10-29T04:40:12.422Z" title="发表于 2022-10-29 12:40:12">2022-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/ZhangJiaoZhuYYDS-github-io/pages/9522d9/" title="Spring5 Webflux"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="Spring5 Webflux"/></a><div class="content"><a class="title" href="/ZhangJiaoZhuYYDS-github-io/pages/9522d9/" title="Spring5 Webflux">Spring5 Webflux</a><time datetime="2022-04-23T13:00:09.000Z" title="发表于 2022-04-23 21:00:09">2022-04-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/ZhangJiaoZhuYYDS-github-io/2022/02/19/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="java8函数式编程"><img src="/ZhangJiaoZhuYYDS-github-io/res/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/cover.jpg" onerror="this.onerror=null;this.src='/ZhangJiaoZhuYYDS-github-io/img/404.jpg'" alt="java8函数式编程"/></a><div class="content"><a class="title" href="/ZhangJiaoZhuYYDS-github-io/2022/02/19/java8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="java8函数式编程">java8函数式编程</a><time datetime="2022-02-19T06:17:52.000Z" title="发表于 2022-02-19 14:17:52">2022-02-19</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/ZhangJiaoZhuYYDS-github-io/categories/Spring5/"><span class="card-category-list-name">Spring5</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/ZhangJiaoZhuYYDS-github-io/categories/java/"><span class="card-category-list-name">java</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/ZhangJiaoZhuYYDS-github-io/categories/%E5%8D%9A%E5%AE%A2/"><span class="card-category-list-name">博客</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/ZhangJiaoZhuYYDS-github-io/tags/Spring5/" style="font-size: 1.5em; color: #99a9bf">Spring5</a> <a href="/ZhangJiaoZhuYYDS-github-io/tags/github/" style="font-size: 1.1em; color: #999">github</a> <a href="/ZhangJiaoZhuYYDS-github-io/tags/hexo/" style="font-size: 1.1em; color: #999">hexo</a> <a href="/ZhangJiaoZhuYYDS-github-io/tags/java/" style="font-size: 1.1em; color: #999">java</a> <a href="/ZhangJiaoZhuYYDS-github-io/tags/java8/" style="font-size: 1.1em; color: #999">java8</a> <a href="/ZhangJiaoZhuYYDS-github-io/tags/node/" style="font-size: 1.1em; color: #999">node</a> <a href="/ZhangJiaoZhuYYDS-github-io/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 1.1em; color: #999">函数式编程</a> <a href="/ZhangJiaoZhuYYDS-github-io/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 1.1em; color: #999">博客</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/ZhangJiaoZhuYYDS-github-io/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/ZhangJiaoZhuYYDS-github-io/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/ZhangJiaoZhuYYDS-github-io/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/ZhangJiaoZhuYYDS-github-io/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/ZhangJiaoZhuYYDS-github-io/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/ZhangJiaoZhuYYDS-github-io/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">4</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">12</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-02-13T13:00:23.945Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/ZhangJiaoZhuYYDS-github-io/./img/img.png')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By 张教主</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">很高兴认识你</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/ZhangJiaoZhuYYDS-github-io/js/utils.js"></script><script src="/ZhangJiaoZhuYYDS-github-io/js/main.js"></script><script src="/ZhangJiaoZhuYYDS-github-io/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (true) {
        const sub = ["大鹏一日同风起，扶摇直上九万里","曾经屠魔的少年，终究成了魔"]
        const content = result.data.content
        sub.unshift(content)
        typedJSFn.init(sub)
      } else {
        document.getElementById('subtitle').innerHTML = result.data.content
      }
    })
  })
}
typedJSFn.run(subtitleType)
</script></div><div class="aplayer no-destroy" data-id="2532930162" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="今天的风,又吹向你,下了雨,我说,所有的酒,都,不如你" data-fontsize="17px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>